
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>OS X 10.10 Yosemite, Apache, MySQL, PHP 5.6, (MAMP) Homebrew Dev Setup</title>
    <meta name="description" content="">

    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="shortcut icon" href="../favicon.ico">

    <link rel="stylesheet" type="text/css" href="../assets/css/screen.css?v=c7bfc3f1e8">
	<link rel="stylesheet" type="text/css" href="../assets/css/prism.min.css?v=c7bfc3f1e8">

    <link rel="canonical" href="http://www.iyware.com/osx-yosemite-mamp-homebrew-development-setup/">
    
    <meta property="og:site_name" content="iyWare">
    <meta property="og:type" content="article">
    <meta property="og:title" content="OS X 10.10 Yosemite, Apache, MySQL, PHP 5.6, (MAMP) Homebrew Dev Setup">
    <meta property="og:description" content="Update A quick update, this was originally written for Yosemite Beta 1, XCode 6 Beta, and PHP56 RC1. Now that the official versions of all those are out, a lot of this post is unnecessary because, well, stable software is...">
    <meta property="og:url" content="http://www.iyware.com/osx-yosemite-mamp-homebrew-development-setup/">
    <meta property="article:published_time" content="2014-08-13T11:17:52.000Z">
    <meta property="article:modified_time" content="2014-10-23T20:55:17.000Z">
    <meta property="article:tag" content="Apache">
    <meta property="article:tag" content="Development">
    <meta property="article:tag" content="Homebrew">
    <meta property="article:tag" content="MDK">
    <meta property="article:tag" content="Moodle">
    <meta property="article:tag" content="PHP">
    <meta property="article:tag" content="MySQL">
    <meta property="article:tag" content="PostgreSQL">
    <meta property="article:tag" content="WordPress">
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="OS X 10.10 Yosemite, Apache, MySQL, PHP 5.6, (MAMP) Homebrew Dev Setup">
    <meta name="twitter:description" content="Update A quick update, this was originally written for Yosemite Beta 1, XCode 6 Beta, and PHP56 RC1. Now that the official versions of all those are out, a lot of this post is unnecessary because, well, stable software is...">
    <meta name="twitter:url" content="http://www.iyware.com/osx-yosemite-mamp-homebrew-development-setup/">
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "iyWare",
    "author": {
        "@type": "Person",
        "name": "Danny Wahl",
        "image": "http://www.iyware.com/content/images/2015/01/743499.jpg",
        "url": "http://www.iyware.com/author/danny",
        "sameAs": null
    },
    "headline": "OS X 10.10 Yosemite, Apache, MySQL, PHP 5.6, (MAMP) Homebrew Dev Setup",
    "url": "http://www.iyware.com/osx-yosemite-mamp-homebrew-development-setup/",
    "datePublished": "2014-08-13T11:17:52.000Z",
    "dateModified": "2014-10-23T20:55:17.000Z",
    "keywords": "Apache, Development, Homebrew, MDK, Moodle, PHP, MySQL, PostgreSQL, WordPress",
    "description": "Update A quick update, this was originally written for Yosemite Beta 1, XCode 6 Beta, and PHP56 RC1. Now that the official versions of all those are out, a lot of this post is unnecessary because, well, stable software is..."
}
    </script>

    <meta name="generator" content="Ghost 0.5">
    <link rel="alternate" type="application/rss+xml" title="iyWare" href="http://www.iyware.com/rss/">
</head>
<body class="post-template tag-apache tag-development tag-homebrew tag-mdk tag-moodle tag-php tag-mysql tag-postgresql tag-wordpress">

    


<header class="main-header post-head no-cover">
    <nav class="main-nav  clearfix">
        <a class="back-button icon-arrow-left" href="http://www.iyware.com">Home</a>
        <a class="subscribe-button icon-feed" href="http://www.iyware.com/rss/">Subscribe</a>
    </nav>
</header>

<main class="content" role="main">

    <article class="post tag-apache tag-development tag-homebrew tag-mdk tag-moodle tag-php tag-mysql tag-postgresql tag-wordpress">

        <header class="post-header">
            <h1 class="post-title">OS X 10.10 Yosemite, Apache, MySQL, PHP 5.6, (MAMP) Homebrew Dev Setup</h1>
            <section class="post-meta">
                <time class="post-date" datetime="2014-08-13">13 August 2014</time>  on <a href="../tag/apache/">Apache</a>, <a href="../tag/development/">Development</a>, <a href="../tag/homebrew/">Homebrew</a>, <a href="../tag/mdk/">MDK</a>, <a href="../tag/moodle/">Moodle</a>, <a href="../tag/php/">PHP</a>, <a href="../tag/mysql/">MySQL</a>, <a href="../tag/postgresql/">PostgreSQL</a>, <a href="../tag/wordpress/">WordPress</a>
            </section>
        </header>

        <section class="post-content">
            <h2 id="update"><strong>Update</strong></h2>

<p>A quick update, this was originally written for Yosemite Beta 1, XCode 6 Beta, and PHP56 RC1. Now that the official versions of all those are out, a lot of this post is unnecessary because, well, stable software is much more… stable. Who knew? Anyways, here’s a tl;dr for the stable version:</p>

<h1 id="installhomebrewxcodeselectinstallrubyedcurlfsslhttpsrawgithubusercontentcomhomebrewinstallmasterinstallbrewdoctortapreposbrewtaphomebrewdupesbrewtaphomebrewversionsbrewtaphomebrewhomebrewphpbrewtaphomebrewapacheverifybrewupdatebrewupgrademacintoshbrewinstallgitbrewinstallopensslsshkeygentrsacemailaddressinvalidsshaddtsshid_rsaapachesudoapachectlstopsudolaunchctlunloadwsystemlibrarylaunchdaemonsorgapachehttpdplist2devnullbrewinstallhttpd24withprivilegedportswithbrewedsslsudocpvusrlocalcellarhttpd242410homebrewmxclhttpd24plistlibrarylaunchdaemonssudochownvrootwheellibrarylaunchdaemonshomebrewmxclhttpd24plistsudochmodv644librarylaunchdaemonshomebrewmxclhttpd24plistsudolaunchctlloadlibrarylaunchdaemonshomebrewmxclhttpd24plistsudohttpdkstartmysqlbrewinstallmysqllnsfvusrlocaloptmysqlplisttlibrarylaunchagentslaunchctlloadtlibrarylaunchagentshomebrewmxclmysqlplistmysqladminurootpasswordnewpasswordphpbrewinstallphp56homebrewapxswithapachewithhomebrewcurlwithhomebrewopensslwithphpdbgwithtidywithoutsnmpchmodrugwusrlocalcellarphp56562libphppearconfigsetphp_iniusrlocaletcphp56phpiniprintfnaddhandlerphp5scriptphpnaddtypetexthtmlphpusrlocaletcapache224httpdconfperlpiesdirectoryindexindexhtmldirectoryindexindexphpindexhtmlgusrlocaletcapache224httpdconfprintfnexportpathdbrewprefixhomebrewphpphp56bindpathtprofiledevstuffbrewinstallcomposerbrewinstallbehatbrewinstallnodenpmginstallgruntnpmginstallshifterbrewtapdanpoltawskihomebrewmdkbrewinstallmoodlesdk">Install Homebrew xcode-select --install ruby -e "$(curl -fsSL <a href="https://raw.githubusercontent.com/Homebrew/install/master/install">https://raw.githubusercontent.com/Homebrew/install/master/install</a>)" brew doctor # Tap Repos brew tap homebrew/dupes brew tap homebrew/versions brew tap homebrew/homebrew-php brew tap homebrew/apache # Verify brew update &amp;&amp; brew upgrade # Macintosh brew install git brew install openssl ssh-keygen -t rsa -C “email@address.invalid” ssh-add ~/.ssh/id<em>rsa # Apache sudo apachectl stop sudo launchctl unload -w /System/Library/LaunchDaemons/org.apache.httpd.plist 2&gt;/dev/null brew install httpd24 --with-privileged-ports --with-brewed-ssl sudo cp -v /usr/local/Cellar/httpd24/2.4.10/homebrew.mxcl.httpd24.plist /Library/LaunchDaemons sudo chown -v root:wheel /Library/LaunchDaemons/homebrew.mxcl.httpd24.plist sudo chmod -v 644 /Library/LaunchDaemons/homebrew.mxcl.httpd24.plist sudo launchctl load /Library/LaunchDaemons/homebrew.mxcl.httpd24.plist sudo httpd -k start # MySQL brew install mysql ln -sfv /usr/local/opt/mysql/*.plist ~/Library/LaunchAgents launchctl load ~/Library/LaunchAgents/homebrew.mxcl.mysql.plist mysqladmin -u root password “NEWPASSWORD” # PHP brew install php56 --homebrew-apxs --with-apache --with-homebrew-curl --with-homebrew-openssl --with-phpdbg --with-tidy --without-snmp chmod -R ug+w /usr/local/Cellar/php56/5.6.2/lib/php pear config-set php</em>ini /usr/local/etc/php/5.6/php.ini printf '\nAddHandler php5-script .php\nAddType text/html .php' &gt;&gt; /usr/local/etc/apache2/2.4/httpd.conf perl -p -i -e 's/DirectoryIndex index.html/DirectoryIndex index.php index.html/g' /usr/local/etc/apache2/2.4/httpd.conf printf '\nexport PATH="$(brew --prefix homebrew/php/php56)/bin:$PATH"' &gt;&gt; ~/.profile # Dev Stuff brew install composer brew install behat brew install node npm -g install grunt npm -g install shifter brew tap danpoltawski/homebrew-mdk brew install moodle-sdk</h1>

<h2 id="originalpost"><strong>Original Post</strong></h2>

<p>It’s that time of the year again. Apple will soon release a <a href="http://www.apple.com/osx/preview/">“new” OS</a> (10.10 Yosemite) and in celebration I’ll format my hard drive and reinstall from scratch and then slowly start reconfiguring my machine for development purposes. So I figured, if I’m going to do it- I might as well document it too. Because, to be honest, I kinda forget what I’ve done… Over a few posts we will look at every step of setting up a Moodle development machine from services configuration through installing Moodle and we’ll document all the tools and commands that are needed along the way. In part one we’ll go over installing Homebrew, git, Apache, MySQL, and PHP. In part two we’ll go over configuring Apache, MySQL, and git, as well as how to use the MDK, git, and JIRA to contribute your code. This post is good for any developer that’s using PHP- not just Moodle. So if you want to set up a Mac to develop in WordPress, Drupal, or whatever- this will get you started.</p>

<h2 id="startingpoint">Starting Point</h2>

<p>Sorry, we won’t be starting with the unboxing of a new Mac, because I didn’t have a $2,000 budget for this post. And in fact we won’t even be starting with the OS setup, which is OK because if you’re using 10.7 or newer, then you’re okay. If you’re still running 10.6 I’m going to assume that it’s because Apple locked you out of updates because your machine is too old, jerks. Do yourself a favor, buy a new PC.</p>

<p>Here’s what you’ll need: Internet access (how are you even reading this?), administrative privileges (the account doesn’t have to be admin), and accounts at a couple of websites (or the ability to sign up). I’ll also need your credit card number and the last four digits of your social security number, just leave them in the comments. Just kidding, don’t.</p>

<h3 id="mappmampmeh">MAPP? MAMP? Meh.</h3>

<p>If you spend any amount of time in the <a href="https://moodle.org/course/view.php?id=5">Moodle forums</a> you’ll run across all kinds of cool acronyms. Usually the <a href="http://localhost:2368/osx-yosemite-mamp-homebrew-development-setup/docs.moodle.org/27/en/Glossary_auto-linking_filter">glossary auto-linker</a> will fill your head with some cool new knowledge, but for the sake of thoroughness we’ll go over a few of them here. You may see people talk about their WAMP or MAMP or LAMP server. Generally this describes their server configuration.</p>

<p>If somebody says they’re using <span style="text-decoration: underline;">W</span>AMP that means that their server is running on “Windows”. Lamp would be “Linux” and MAMP – Mac. Though technically it should be “OS X” but OAMP is hard to say. Generally most web softwares don’t need a specific platform to run on, a website can run on any operating system. Generally. Stupid ASP.</p>

<p>The second letter, “A”, which in the examples above is consistent means that the web service running on the server is “Apache”. There are a variety of web service applications available including IIS, Nginx, lighttpd. <em>Generally</em> the software (i.e. Moodle) doesn’t mandate a specific web server software either. Now it could be that the software (i.e. Moodle) depends on some other software (i.e. PHP) that is not compatible or available on that web server. But again, this isn’t usually a problem.</p>

<p>The Third letter defines the database type. Moodle supports 4 different databases out of the box: MySQL, PostgreSQL, Oracle, and MSSQL. Because Moodle has a sweet database driver ($DB) the database that you use doesn’t really matter- in terms of developing on your machine. If you’re trying to pick a database for a large, live server, it probably does matter. So if you see LAMP, MySQL or LAPP, PostgreSQL. Users of other DB types aren’t so clever so they’ll just say boring stuff like “I’m using Windows Server 2008 RC2 with IIS 7 and MSSQL.” instead of WS08RC2IIS7MSSQLFTW, which in my opinion is cooler AND easier to understand.</p>

<p>Finally, the last “P” stands for “PHP” which stands for “PHP Hypertext Preprocessor” which stands for “PHP Hypertext Preprocessor Hypertext Preprocessor” which stands for “All work and no play makes Jack a dull boy.” Anyways… You’ll need this. Moodle won’t run with out it, and without a specific version as mentioned in the release notes of the Moodle version you download.</p>

<p>With so many options, how do you choose? Like I said in the title, “Meh”. I’m going to assume you’re developing on a Mac, so that rules out Windows and Linux. Apache is by far the most popular web server and is included with OS X. MSSQL and Oracle don’t run on OS X. You need PHP.</p>

<p>So your only real options are MySQL or PostgreSQL, and we’ll cover that in a bit, but first let’s start with “M”.</p>

<h2 id="macintoshosx">Macintosh (OS X)</h2>

<p>We need to do a bit of configuring of our Mac before we dive into setting up services. Mostly this will involve downloading some applications.</p>

<h3 id="getgit">Get git</h3>

<p>Moodle development is managed using <a href="http://en.wikipedia.org/wiki/Git_%28software%29">git</a>. git in a nutshell lets you track changes of code from lots of users. If you’re going to be doing Moodle development you MUST use git. Fortunately OS X comes with git included, but you can’t use it. Open up terminal and enter the following command:</p>

<p><span class="lang:sh decode:true  crayon-inline ">which git; git -version</span></p>

<p>and you’ll end up with a return something like this</p>

<p>MacBook-Pro:~ dannywahl$ which git /usr/bin/git MacBook-Pro:~ dannywahl$ git -v xcode-select: note: no developer tools were found at '/Applications/Xcode.app', requesting install. Choose an option in the dialog to download the command line developer tools.</p>

<p>with a prompt to download XCode command line tools:</p>

<p><img src="../content/images/import/Screen-Shot-2014-07-27-at-2.38.29-pm-960x600.png" alt="what git?"></p>

<p>Go ahead and download it. It’s also worth it to install Xcode as well. For this post you will need both Xcode 5 which you can download from the <a href="https://developer.apple.com/downloads/index.action">Apple Developer site</a> and the <a href="https://developer.apple.com/xcode/downloads/">Xcode 6 beta</a>. I recommend that you rename Xcode 5 from “xcode.app” to “xcode5.app” and Xcode 6 from “Xcode-beta.app” to “Xcode.app” because most of our toolchain will be using the utilities in Xcode 6. Once Xcode and the command line tools are installed we can now use the version of git included with OS X- however it’s a little dated, and we’re going to install a newer version of git from somewhere else.</p>

<p>When it comes to installing the git binary we have a few different choices. First, we can install the <a href="http://git-scm.com/downloads">official git version</a> from git-scm.com, second we can install a bundled version of git with a different application like <a href="https://mac.github.com/">github for Mac</a> or <a href="http://www.git-tower.com/">git-tower</a> (both of which we’ll go over later), or third you can use a third-party package manager to install a copy of git for you. This last option is the one we will be using.</p>

<h3 id="homebrew">Homebrew</h3>

<p><a href="http://brew.sh/">Homebrew</a> is self-styled “The missing package manager for OS X” and they really deliver. If you’ve spent any amount of time working on an <em>actual</em> Unix or Linux machine you probably both appreciate OS X’s “Unix roots” and really dislike what Apple has chosen to trim back. Without a package manager like pac-man, apt, or the like, OS X is really limited. Homebrew solves that in a really elegant way, so let’s install it. Open up terminal and copy and paste this single command:</p>

<p><span class="lang:sh decode:true  crayon-inline ">ruby -e “$(curl -fsSL <a href="https://raw.github.com/Homebrew/homebrew/go/install)%E2%80%9D">https://raw.github.com/Homebrew/homebrew/go/install)”</a></span></p>

<p>This command has three requirements, one you need to have administrator access or you’ll not be able to install the program as the /usr/ directory is protected. Two you’ll need internet access as the command downloads the script from github and then passes it to ruby to run. If you don’t have internet access you’ll see an error like this:</p>

<p>dannywahlmbp:~ dannywahl$ ruby -e "$(curl -fsSL <a href="https://raw.github.com/Homebrew/homebrew/go/install">https://raw.github.com/Homebrew/homebrew/go/install</a>)" curl: (6) Could not resolve host: raw.github.com</p>

<p>Three, you will need to have the XCode command line utilities installed. You should have already install them. If you don’t have the command line tools installed then you will be prompted to install them:</p>

<p><mark>&gt; Installing the Command Line Tools (expect a GUI popup): </mark>&gt; /usr/bin/sudo /usr/bin/xcode-select --install xcode-select: note: install requested for command line developer tools Press any key when the installation has completed.</p>

<p>After that you should be good to go. Just run <code>brew doctor</code> as recommended to make sure everything’s okay.</p>

<p>Last login: Tue Jul 29 10:28:20 on ttys000 dannywahlmbp:~ dannywahl$ ruby -e "$(curl -fsSL <a href="https://raw.github.com/Homebrew/homebrew/go/install">https://raw.github.com/Homebrew/homebrew/go/install</a>)" <mark>&gt; This script will install: /usr/local/bin/brew /usr/local/Library/... /usr/local/share/man/man1/brew.1 Press RETURN to continue or any other key to abort </mark>&gt; /usr/bin/sudo /bin/mkdir /usr/local WARNING: Improper use of the sudo command could lead to data loss or the deletion of important system files. Please double-check your typing when using sudo. Type "man sudo" for more information. To proceed, enter your password, or type Ctrl-C to abort. Password: <mark>&gt; /usr/bin/sudo /bin/chmod g+rwx /usr/local </mark>&gt; /usr/bin/sudo /usr/bin/chgrp admin /usr/local <mark>&gt; /usr/bin/sudo /bin/mkdir /Library/Caches/Homebrew </mark>&gt; /usr/bin/sudo /bin/chmod g+rwx /Library/Caches/Homebrew <mark>&gt; Downloading and installing Homebrew... remote: Counting objects: 188543, done. remote: Compressing objects: 100% (51551/51551), done. remote: Total 188543 (delta 135844), reused 188510 (delta 135819) Receiving objects: 100% (188543/188543), 37.53 MiB | 395.00 KiB/s, done. Resolving deltas: 100% (135844/135844), done. From <a href="https://github.com/Homebrew/homebrew">https://github.com/Homebrew/homebrew</a> * [new branch] master -&gt; origin/master HEAD is now at 881c231 Fix up dep directories before activating ENV extensions </mark>&gt; Installation successful! <mark>&gt; Next steps Run <code>brew doctor</code> before you install anything Run <code>brew help</code> to get started dannywahlmbp:~ dannywahl$ brew doctor Your system is ready to brew.</mark></p>

<p>If you see “Your system is ready to brew.” then we can move on to the next step. At this point you do have OS X’s version of git installed. To see your specific version run <code>git --version</code> in terminal:</p>

<p>dannywahlmbp:~ dannywahl$ git --version git version 1.9.3 (Apple Git-50)</p>

<p>That’s the version on my system, which is the bleeding-edge version of git that Apple is shipping on a beta operating system and according to <a href="https://github.com/git/git/releases">github releases</a>, it was released (at time of this writing) about two and a half months ago. Not to mention it’s a full major release behind. git-scm.com has the latest version of git available as 2.0.3. I like to be a little more up to date than that. If we search the homebrew repository we can see the latest version available is 2.0.2:</p>

<p>dannywahlmbp:~ dannywahl$ brew search git bagit git-extras git-number github-release easy-git git-flow git-open gitslave geogit git-flow-avh git-sh legit git git-flow-clone git-ssh libgit2 git-annex git-ftp git-tf magit git-archive-all git-gerrit git-tig stgit git-cal git-imerge git-tracker topgit git-cola git-integration git-url-sub git-crypt git-multipush gitbucket git-encrypt git-now giter8 homebrew/versions/git-tf-2.0.2 homebrew/binary/subgit</p>

<p>At the time of this writing 2.0.2 is only 13 days old and 2.0.3 is only 5 days old. That’s a much better timeframe for updating. So let’s install the homebrew version of git using <code>brew install git</code></p>

<p>dannywahlmbp:~ dannywahl$ brew install git &gt; Downloading <a href="https://www.kernel.org/pub/software/scm/git/git-2.0.3.tar.gz">https://www.kernel.org/pub/software/scm/git/git-2.0.3.tar.gz</a> ######################################################################## 100.0% <mark>&gt; make prefix=/usr/local/Cellar/git/2.0.3 sysconfdir=/usr/local/etc CC=clang C </mark>&gt; make CC=clang CFLAGS= LDFLAGS= <mark>&gt; make clean </mark>&gt; make CC=clang CFLAGS= LDFLAGS= <mark>&gt; Downloading <a href="https://www.kernel.org/pub/software/scm/git/git-manpages-2.0.3.t">https://www.kernel.org/pub/software/scm/git/git-manpages-2.0.3.t</a> ######################################################################## 100.0% </mark>&gt; Downloading <a href="https://www.kernel.org/pub/software/scm/git/git-htmldocs-2.0.3.t">https://www.kernel.org/pub/software/scm/git/git-htmldocs-2.0.3.t</a> ######################################################################## 100.0% <mark>&gt; Caveats The OS X keychain credential helper has been installed to: /usr/local/bin/git-credential-osxkeychain The 'contrib' directory has been installed to: /usr/local/share/git-core/contrib Bash completion has been installed to: /usr/local/etc/bash_completion.d zsh completion has been installed to: /usr/local/share/zsh/site-functions </mark>&gt; Summary /usr/local/Cellar/git/2.0.3: 1328 files, 31M, built in 69 seconds</p>

<p>So you’ll see a couple of things- first we actually installed 2.0.3 and that’s because homebrew isn’t a repository of binaries, it simply manages them, the install actually comes from the main git repository at git-scm (kernel.org). In addition to the vanilla git binary we also get bash completion and man pages. Sweet! Go ahead and check the version again, you may have to quit your terminal session and start a new one.</p>

<p>dannywahlmbp:~ dannywahl$ git --version git version 2.0.3</p>

<p>That’s pretty much it for git, now we can move on to github, where we’ll be managing our source code.</p>

<h3 id="github">Github</h3>

<p><a href="https://github.com/">Github</a> is where all the cool kids are storing their code these days. Well, everybody except <a href="http://git.moodle.org/gw">Moodle</a> and <a href="https://gitorious.org/mahara">Mahara</a>. But at least they provide copies of their work at github- Moodle at least, I didn’t check Mahara (too lazy to open a new tab…).</p>

<p>Basically Github is “the cloud” for source code versioning. You create a repository there, “clone” it to your machine, edit, and push your changes back to the server. If you’re new to git there are lots of resources available to you. We’ll cover a few basics in this post but mastering it is beyond the scope. I suggest you check out:</p>

<ul>
<li><a href="http://www.git-tower.com/learn/ebook/mac/introduction">Learn Version Control With Git</a></li>
<li><a href="http://git-scm.com/book/en/Getting-Started">Git –local-branching-on-the-cheap</a></li>
<li><a href="https://try.github.io/levels/1/challenges/1">Code School – Try Git</a></li>
<li><a href="https://www.atlassian.com/git/tutorial/git-basics">Git Tutorials</a></li>
</ul>

<p>Sorry, that list isn’t nearly as fun as anything Buzzfeed has put together, and full disclosure- I learned git just by Moodle development so I can’t vouch for any of the above resources… (then why did I even recommend them? Stupid!) Anyways…</p>

<p>If you do not already have an account at github you will need to go <a href="https://github.com/join">sign up</a>. Once you’ve cleared the hoops of verifying email, etc… log in. Github should provide you with a nice step-by-step tutorial of setting up you Mac. But we’ll do it again, just to be sure!</p>

<p>Log in and head over to your <a href="https://github.com/settings/profile">profile</a>, fill in any info you want and then click on the <a href="https://github.com/settings/ssh">SSH Keys</a> tab on the left. <a href="http://en.wikipedia.org/wiki/Ssh">SSH</a> basically lets you securely communicate with the server where you are storing your code. Right now we’ll go through the process of generating an SSH key and storing it on github.</p>

<h4 id="checkforexistingsshkeys">Check for existing SSH Keys</h4>

<p>Open Terminal again, now if you’re on a fresh OS install you won’t have to do this but you can. Type the following command:</p>

<p><span class="lang:sh decode:true  crayon-inline ">ls -lsa ~/.ssh</span></p>

<p><code>ls</code> is the command to ‘list’ everything in a directory. <code>~</code> is short code for your home folder, on a Mac that’s /Users/UserName (by default). <code>/</code> is a folder inside of your home folder. <code>.ssh</code> is the name of the folder. On Unix systems a folder that starts with a ‘.’ will be hidden- no need for <a href="http://ss64.com/osx/chflags.html">chflags</a>! So we’ve put together a command that says “show the contents of the hidden folder ‘.ssh’ inside of my home folder”. And that is probably shockingly similar to the AppleScript that you would use to do that too.</p>

<p>If terminal gives you this return:</p>

<p>dannywahlmbp:~ dannywahl$ ls -lsa ~/.ssh ls: /Users/dannywahl/.ssh: No such file or directory</p>

<p>then we need to create the directory with another command (just copy and paste):</p>

<p><span class="lang:sh decode:true  crayon-inline ">mkdir ~/.ssh; chmod 700 ~/.ssh</span></p>

<p>This will do two things, create the ssh directory, and then make sure only you can access it. You can learn more about Unix permissions <a href="http://en.wikipedia.org/wiki/Unix_permissions#Numeric_notation">here</a>.</p>

<p>If terminal gives you this return:</p>

<p>dannywahlmbp:~ dannywahl$ ls -lsa ~/.ssh/ total 16 0 drwx------ 4 dannywahl staff 136 Jul 31 16:41 . 0 drwxr-xr-x+ 18 dannywahl staff 612 Jul 31 16:36 .. 8 -rw------- 1 dannywahl staff 1766 Jul 31 16:41 id<em>rsa 8 -rw-r--r-- 1 dannywahl staff 398 Jul 31 16:41 id</em>rsa.pub</p>

<p>Then you already have an SSH Key. IF you created this key and are sure of its security you can use it with github, skip to the “Adding your SSH Key to Github” section below. Otherwise you can create a new one.</p>

<h4 id="creatingansshkeyset">Creating an SSH Key Set</h4>

<p>When you create an SSH key you actually create two keys, a private key and a public key. You keep the private key and you can share the public key with others. This allows them to receive messages and ensure it is from you, but they can’t pretend to be you and send out messages on your behalf. Back in terminal we’re going to create a new <a href="http://en.wikipedia.org/wiki/RSA_%28cryptosystem%29">RSA</a> SSH key set. Run the command:</p>

<p><span class="lang:sh decode:true  crayon-inline ">ssh-keygen -t rsa -C “email@address.invalid”</span></p>

<p>This will kick off a “Wizard” of sorts and walk you through creating your key pair. First you need to specify where to save the new keys, the default is your ~/.ssh folder, so just push enter.</p>

<p>Generating public/private rsa key pair. Enter file in which to save the key (/Users/dannywahl/.ssh/id_rsa):</p>

<p>Note that you can specify a different name, as you can have multiple SSH key pairs. Though for most instances a single pair is all that is necessary.</p>

<p>Next it will ask you for a key passphrase, which is optional. I strongly suggest that you add a passphrase for both added security and the fact that other SSH applications (not github) require a passphrase to function properly and if you want to reuse your key pair you will need a passphrase. Type your passphrase press Enter and type it again to make sure it matches.</p>

<p>Enter passphrase (empty for no passphrase): Enter same passphrase again:</p>

<p>After that your key pair will be save and you will be given some information about it. It will look something like this:</p>

<p>Your identification has been saved in /Users/dannywahl/.ssh/id<em>rsa. Your public key has been saved in /Users/dannywahl/.ssh/id</em>rsa.pub. The key fingerprint is: fa:e7:5c:f2:60:d8:ad:44:3c:a4:07:0d:b5:09:77:9f danny@iyware.com The key's randomart image is: +--[ RSA 2048]----+ | =A+ . | | <em>=</em> . | | +.=oE . | | . o= = | | .S . | | . | | | | | | | +-----------------+</p>

<p>The finger print and randomart allow you to verify that a public key copy is a real copy. Please note that these are NOT my real public key credentials. On that note you should NEVER share your private key with anyone.</p>

<h4 id="activatingyourkey">Activating Your Key</h4>

<p>Now that you have created your key you need to tell the operating system to use it. We will use the <code>ssh-add</code> command to load your key. Enter this command, and then type your key passphrase. If you didn’t enter a passphrase, simply press Enter.</p>

<p>dannywahlmbp:~ dannywahl$ ssh-add ~/.ssh/id<em>rsa Enter passphrase for /Users/dannywahl/.ssh/id</em>rsa: Identity added: /Users/dannywahl/.ssh/id<em>rsa (/Users/dannywahl/.ssh/id</em>rsa)</p>

<h4 id="copyyourpublickeytogithub">Copy Your Public Key to Github</h4>

<p>The final step is to give github a copy of your public key. If you don’t have the <a href="https://github.com/settings/ssh">SSH Keys</a> page open you will need to navigate there and click “Add SSH Keys”. You can store more than one key with github, which is useful if you have multiple devices that you do development from.</p>

<p>Back in terminal you have one more command to run, simply copy and paste (unless you renamed your key):</p>

<p><span class="lang:sh decode:true  crayon-inline ">pbcopy </span></p>

<p>This command copies the contents of your public key to your clipboard. You can also open your key in a text editor and copy the contents but this command prevents both omitting a character and accidentally editing the key. Switch back to github and paste in the “Key” field. If there’s a blank line at the end, that’s ok- don’t erase it. Remember we want the contents of the key exactly.</p>

<p>You’ll want to give you key a title so that if you ever have a security issue at github you can see exactly which machine accessed or changed which repositories. Your page should look something like this:</p>

<p><img src="../content/images/import/addkey-960x600.png" alt="Add an SSH Public Key"></p>

<p>Click the “Add key” button and you’ll be taken back to the SSH Keys page, where your new key will be listed. If you look at terminal you’ll notice that the fingerprints match.</p>

<p><img src="../content/images/import/sshkeys-960x600.png" alt="sshkeys"></p>

<p>For now we’re done with github. So far we’ve set up homebrew, installed git, created an SSH key pair, and added a copy of our public key to github. Next we’ll start setting up the “server” side of our development machine, starting with Apache.</p>

<h2 id="apache">Apache</h2>

<p>The <a href="http://httpd.apache.org/">Apache HTTPD</a> server is the most popular web server in the world. And in fact Apache is included with OS X by default. Just copy and paste this command into terminal:</p>

<p><span class="lang:sh decode:true  crayon-inline ">apachectl -v</span></p>

<p>Mine says:</p>

<p>Server version: Apache/2.4.9 (Unix) Server built: Jun 28 2014 12:11:10</p>

<p>Which is actually not that bad. Apache is one of those softwares that updates rather slowly, 2.4.10 was released on July 10th. Since Apache is included in OS X we can just use that right? Sure, just visit this link: <a href="http://localhost">http://localhost</a>. Oops, does your screen look something like this?</p>

<p><img src="../content/images/import/unabletoconnect-960x600.png" alt="localhost: Unable to connect"></p>

<p>That’s because even though Apache is included in OS X it’s off by default. We have a few options available that we’ll look at to enabling Apache.</p>

<h3 id="theappleway">The Apple Way</h3>

<p>Even though Apple includes Apache as a part of OS X, and they used to include an option to enable it in the “Sharing” pane of System preferences, the preferred way to enable Apache on OS X since 10.7 is to <a href="http://www.apple.com/osx/server/">buy the Server app</a> from the App Store. That’s right, for only $19 Apple will sell you a button that starts Apache.</p>

<h3 id="thepoormansway">The Poor Man’s Way</h3>

<p>The second option is to simply start Apache ourselves. Go to terminal and type this command:</p>

<p><span class="lang:sh decode:true  crayon-inline ">sudo apachectl start</span></p>

<p>After you type your password head back to <a href="http://loclahost">http://localhost</a> and it should look more like this:</p>

<p><img src="../content/images/import/itworks-960x600.png" alt="it works!"></p>

<p>$20 bucks for that. To be fair to Apple, Server does give you lots of other functionality but for our purposes they’re not really necessary. Kind of like installing XCode to use git. Now, I’m going to recommend that you actually stop the Apache service because we are not going to use the built in version that Apple ships with.</p>

<p><span class="lang:sh decode:true  crayon-inline ">sudo apachectl stop</span></p>

<h3 id="thehomebrewway">The Homebrew Way</h3>

<p>The reason we’re not going to use the version that ships with Apple is because they do a TON of customization to the Apache configurations and it makes it really difficult to simply add a vhost or edit a config. You even have to mess with groups to allow yourself to change files in your ~/Sites folder. Instead we’re going to install Apache via Homebrew and it will run entirely within your home folder.</p>

<p>First we need to unload the OS X version of Apache which is loaded on the machine at startup, but “stopped”. Copy and paste this into terminal.</p>

<p><span class="lang:sh decode:true  crayon-inline ">sudo launchctl unload -w /System/Library/LaunchDaemons/org.apache.httpd.plist 2&gt;/dev/null</span></p>

<p>Next we need to do is add the Apache repository to the list of repositories that Homebrew tracks, as it is not included by default.</p>

<p><span class="lang:sh decode:true  crayon-inline ">brew tap homebrew/apache</span></p>

<p>and you’ll see that the repository is downloaded and 9 new forumlae are available for install.</p>

<p>dannywahlmbp:~ dannywahl$ brew tap homebrew/apache Cloning into '/usr/local/Library/Taps/homebrew/homebrew-apache'... remote: Counting objects: 241, done. remote: Total 241 (delta 0), reused 0 (delta 0) Receiving objects: 100% (241/241), 45.55 KiB | 39.00 KiB/s, done. Resolving deltas: 100% (130/130), done. Checking connectivity... done. Tapped 9 formulae</p>

<p>The new repository gives us two versions of Apache 2.2 and 2.4. For our development we will be installing Apache 2.4, however when we try we end up with an error:</p>

<p>dannywahlmbp:~ dannywahl$ brew install httpd24 Error: No available formula for apr (dependency of httpd24) Searching taps... homebrew/dupes/apr-util homebrew/dupes/apr homebrew/science/reapr</p>

<p>it seems that Apache 2.4 requires another app called ‘apr’ that isn’t on our system. Fortunately Homebrew does us a favor and tells us where to find it and it’s available in another repository, so we need to add that to our list of available repositories like before:</p>

<p><span class="lang:sh decode:true  crayon-inline ">brew tap homebrew/dupes</span></p>

<p>According to the <a href="https://github.com/Homebrew/homebrew-dupes">‘dupes’ repository</a>, “These formulae duplicate software provided by OS X, though may provide more recent or bugfix versions.” Now what’s nice is that homebrew will resolve dependencies for us now that it knows where the files are, so let’s try again:</p>

<p><span class="lang:sh decode:true  crayon-inline ">brew install httpd24 –with-privileged-ports</span></p>

<p><code>httpd24</code> will get us the current version of Apache 2.4. The ‘with-privileged-ports’ parameter tells Apache to run on port 80/443 instead of 8080/8443. Essentially this means you can visit <a href="http://localhost">http://localhost</a> instead of having to type <a href="http://localhost:8080">http://localhost:8080</a>. 80 and 443 are the default ports that all websites run on and for our development purposes are preferable.</p>

<p>If you get an error during compiling please follow the instructions of the output. If you have installed a beta version of Xcode on your machine please do NOT open an issue with the Homebrew people (like <a href="https://github.com/Homebrew/homebrew/issues/31217">this one</a>). Instead head over to the App Store and redownload the old version. If the app store won’t let you download you can go to the <a href="https://developer.apple.com/downloads/">Apple Developer Downloads</a> page and download the latest stable version of Xcode to your machine. You don’t have to remove the beta version, but the stable needs to be named ‘Xcode.app’.</p>

<p>Error: Homebrew doesn't know what compiler versions ship with your version of Xcode (6.0). Please <code>brew update</code> and if that doesn't help, file an issue with the output of <code>brew --config</code>: <a href="https://github.com/Homebrew/homebrew/issues">https://github.com/Homebrew/homebrew/issues</a> Note that we only track stable, released versions of Xcode. Thanks! READ THIS: <a href="https://github.com/Homebrew/homebrew/wiki/troubleshooting">https://github.com/Homebrew/homebrew/wiki/troubleshooting</a> If reporting this issue please do so at (not Homebrew/homebrew): <a href="https://github.com/homebrew/homebrew-apache/issues">https://github.com/homebrew/homebrew-apache/issues</a></p>

<p>Another issue I ran into was a configure failure because zlib couldn’t be found:</p>

<p>brew install httpd24 --with-privileged-ports <mark>&gt; Downloading <a href="https://archive.apache.org/dist/httpd/httpd-2.4.10.tar.bz2">https://archive.apache.org/dist/httpd/httpd-2.4.10.tar.bz2</a> Already downloaded: /Library/Caches/Homebrew/httpd24-2.4.10.tar.bz2 </mark>&gt; ./configure --enable-layout=Homebrew --enable-mods-shared=all --with-mpm=pre checking whether to enable mod<em>sed... shared (all) checking whether to enable mod</em>charset<em>lite... shared (all) checking whether to enable mod</em>deflate... checking dependencies checking for zlib location... not found checking whether to enable mod<em>deflate... configure: error: mod</em>deflate has been requested but can not be built due to prerequisite failures READ THIS: <a href="https://github.com/Homebrew/homebrew/wiki/troubleshooting">https://github.com/Homebrew/homebrew/wiki/troubleshooting</a> If reporting this issue please do so at (not Homebrew/homebrew): <a href="https://github.com/homebrew/homebrew-apache/issues">https://github.com/homebrew/homebrew-apache/issues</a></p>

<p>This is probably a result of using a beta version of the Xcode command line tools, but there’s a simple fix that’s <a href="https://github.com/Homebrew/homebrew-apache/issues/30">been reported</a>. First you need to install zlib in Homebrew from the dupes repository.</p>

<p><span class="lang:sh decode:true  crayon-inline ">brew install zlib</span></p>

<p>Homebrew will give you this caveat:</p>

<p><mark>&gt; Caveats This formula is keg-only, so it was not symlinked into /usr/local. Mac OS X already provides this software and installing another version in parallel can cause all kinds of trouble. Generally there are no consequences of this for you. If you build your own software and it requires this formula, you'll need to add to your build variables: LDFLAGS: -L/usr/local/opt/zlib/lib CPPFLAGS: -I/usr/local/opt/zlib/include</mark></p>

<p>Which basically means that you need to manually use that version of zlib, which is what we’ll tell our Apache build script to do now. Go back to terminal and enter the following command:</p>

<p><span class="lang:sh decode:true  crayon-inline ">brew edit httpd24</span></p>

<p>This will open the config in your default text editor. Enter this line:</p>

<p><span class="lang:sh decode:true  crayon-inline ">args </span></p>

<p>After this section:</p>

<p>if build.with? "privileged-ports" args That will add a new argument that forces it to use our Homebrew version of zlib. Save the file and run the build again:</p>

<p><span class="lang:sh decode:true  crayon-inline ">brew install httpd24 --with-privileged-ports</span></p>

<p>If you don't have any errors then your output should look something like this:</p>

<p>dannywahlmbp:~ dannywahl$ brew install httpd24 --with-privileged-ports &gt; Downloading <a href="https://archive.apache.org/dist/httpd/httpd-2.4.10.tar.bz2">https://archive.apache.org/dist/httpd/httpd-2.4.10.tar.bz2</a> Already downloaded: /Library/Caches/Homebrew/httpd24-2.4.10.tar.bz2 <mark>&gt; ./configure --enable-layout=Homebrew --enable-mods-shared=all --with-mpm=pre </mark>&gt; make <mark>&gt; make install </mark>&gt; Caveats To have launchd start httpd24 at login: ln -sfv /usr/local/opt/httpd24/*.plist ~/Library/LaunchAgents Then to load httpd24 now: launchctl load ~/Library/LaunchAgents/homebrew.mxcl.httpd24.plist <mark>&gt; Summary /usr/local/Cellar/httpd24/2.4.10: 199 files, 4.4M, built in 86 seconds</mark></p>

<p>Finally it's important that we look at the caveats as they will tell us how to make sure that Apache starts when we log in to the system. Since we used the <code>--with-privileged-ports</code> parameter we will have to make some adjustments to the recommendations that Homebrew provides. Their recommendation is to create a symlink to your user LaunchAgents folder. That folder contains plists that do certain things when you log in. However, on a Unix system lower ports like 80 require root to run. Since this launch agent is launching Apache under your username it will quietly fail. Instead we will have the system (root) load it for us. The biggest difference is that Apache will be loaded at system start instead of when you log in. So go ahead and copy and paste this modified command into terminal.</p>

<p><span class="lang:sh decode:true  crayon-inline ">sudo ln -sfv /usr/local/opt/httpd24/*.plist /Library/LaunchDaemons; sudo launchctl load /Library/LaunchDaemons/homebrew.mxcl.httpd24.plist</span></p>

<p>Now the next time you reboot Apache will load. But the beautiful thing about a service is that you can start, stop, or reload it at any time- we don't <em>need</em> to log out and log in again to start. Now, since we're running Apache as root we will need to use 'sudo'. So it's not necessary now, because we just loaded it, but for the future you can use:</p>

<p>sudo httpd -k start sudo httpd -k restart sudo httpd -k stop</p>

<p>for more info you can check the manual '<code>man</code>' entry that's included with our Apache install.</p>

<p><span class="lang:sh decode:true  crayon-inline ">man httpd</span></p>

<p>Now Apache is installed (by you) and running (as root). Go ahead and go back to <a href="http://localhost">http://localhost</a> and you should see this:</p>

<p><img src="../content/images/import/itworks1-960x600.png" alt="Apache is Installed"></p>

<p>By default the Apache configuration files are stored in</p>

<p><span class="lang:sh decode:true  crayon-inline ">/usr/local/etc/apache2/2.4</span></p>

<p>and the web root is at</p>

<p><span class="lang:sh decode:true  crayon-inline ">/usr/local/var/www/htdocs</span></p>

<p>We'll revisit further Apache configuration when we get to Moodle setup, but for now enjoy your shiny new site!</p>

<h2 id="mysqluhhpostgresql">MySQL, uhh.. PostgreSQL</h2>

<p>The next step on setting up our MA*P server is the database. In the old, olden days of 3 years ago OS X included MySQL in OS X server. Then Apple switched to Postgres. Then Apple bundled Postgres with the OS and added an 'enable' button in the Server app (a la Apache). And now starting with OS 10.9 it's back to being bundled exclusively with the Server App. tl;dr: you need to install a database, and I figure if it's so trivial for Apple to switch databases then it doesn't really matter which one we're using right ;)</p>

<p>Ok, here's the exception, if you're planning on developing some sort of Moodle plugin, or fixing bugs that are database oriented, then you'll probably want to install multiple database drivers. But for simpler development where Moodle $DB handled the transactions, pick your poison. I'm going to use MySQL. So let's head back to the Homebrew app in terminal and get started:</p>

<p><span class="lang:sh decode:true  crayon-inline ">brew install mysql</span></p>

<p>Ok, caveat. If you happen to be on an as-of-yet-unreleased OS and have both Xcode 5 and Xcode 6 beta installed on your system you will need to use Xcode 6 to install MySQL otherwise this will happen:</p>

<p>brew install mysql &gt; Installing dependencies for mysql: cmake, pkg-config, makedepend, ope <mark>&gt; Installing mysql dependency: cmake </mark>&gt; Downloading <a href="http://www.cmake.org/files/v3.0/cmake-3.0.0.tar.gz">http://www.cmake.org/files/v3.0/cmake-3.0.0.tar.gz</a> ######################################################################## 100.0% <mark>&gt; ./bootstrap --prefix=/usr/local/Cellar/cmake/3.0.0 --system-libs --no-system See also "/tmp/cmake-Lgaj/cmake-3.0.0/CMakeFiles/CMakeError.log". --------------------------------------------- Error when bootstrapping CMake: Problem while running initial CMake --------------------------------------------- READ THIS: <a href="https://github.com/Homebrew/homebrew/wiki/troubleshooting">https://github.com/Homebrew/homebrew/wiki/troubleshooting</a> These open issues may also help: Qt5 Cmake Files Incorrect (<a href="https://github.com/Homebrew/homebrew/issues/29938">https://github.com/Homebrew/homebrew/issues/29938</a>) Fix LLVM CMake modules not being preprocessed (<a href="https://github.com/Homebrew/homebrew/pull/29976">https://github.com/Homebrew/homebrew/pull/29976</a>) glm: Does not install FindGLM.cmake (<a href="https://github.com/Homebrew/homebrew/issues/28403">https://github.com/Homebrew/homebrew/issues/28403</a>) cmake builds fail on CLT-only with --env=std (<a href="https://github.com/Homebrew/homebrew/issues/29101">https://github.com/Homebrew/homebrew/issues/29101</a>) cmake find_package(PythonLibs) broken with brewed python on 10.9 (<a href="https://github.com/Homebrew/homebrew/issues/25118">https://github.com/Homebrew/homebrew/issues/25118</a>)</mark></p>

<p>It's nice that they give you a log to inspect, but it's also kind of annoying that the /tmp dir gets cleaned up one it's done failing... Basically if you can capture the log in Console while it's failing you'll see that something in the Xcode tool is causing the failure. I guessed that it was because of Xcode 5 - and hey, lucky guess! So if you have that error drop into terminal and use this command:</p>

<p><span class="lang:sh decode:true  crayon-inline ">mv /Applications/Xcode.app /Applications/Xcode5.app; mv /Applications/Xcode6-beta4.app /Applications/Xcode.app</span></p>

<p>Or just go to the /Applications folder and rename them, your choice. Then run the install command again. When the build is done you can move your Xcode apps back to their original names. If all goes well you should end up with some terminal output like this:</p>

<p>brew install mysql &gt; Installing dependencies for mysql: cmake, pkg-config, makedepend, ope <mark>&gt; Installing mysql dependency: cmake </mark>&gt; Downloading <a href="http://www.cmake.org/files/v3.0/cmake-3.0.0.tar.gz">http://www.cmake.org/files/v3.0/cmake-3.0.0.tar.gz</a> Already downloaded: /Library/Caches/Homebrew/cmake-3.0.0.tar.gz <mark>&gt; ./bootstrap --prefix=/usr/local/Cellar/cmake/3.0.0 --system-libs --no-system </mark>&gt; make <mark>&gt; make install /usr/local/Cellar/cmake/3.0.0: 1622 files, 25M, built in 4.1 minutes </mark>&gt; Installing mysql dependency: pkg-config <mark>&gt; Downloading <a href="http://pkgconfig.freedesktop.org/releases/pkg-config-0.28.tar.gz">http://pkgconfig.freedesktop.org/releases/pkg-config-0.28.tar.gz</a> ######################################################################## 100.0% </mark>&gt; ./configure --prefix=/usr/local/Cellar/pkg-config/0.28 --disable-host-tool - <mark>&gt; make </mark>&gt; make check <mark>&gt; make install /usr/local/Cellar/pkg-config/0.28: 10 files, 608K, built in 89 seconds </mark>&gt; Installing mysql dependency: makedepend <mark>&gt; Downloading <a href="http://xorg.freedesktop.org/releases/individual/util/makedepend-">http://xorg.freedesktop.org/releases/individual/util/makedepend-</a> ######################################################################## 100.0% </mark>&gt; Downloading <a href="http://xorg.freedesktop.org/releases/individual/proto/xproto-7.0">http://xorg.freedesktop.org/releases/individual/proto/xproto-7.0</a> ######################################################################## 100.0% <mark>&gt; ./configure --disable-silent-rules --prefix=/private/tmp/makedepend-xfpn/mak </mark>&gt; make install <mark>&gt; Downloading <a href="http://xorg.freedesktop.org/releases/individual/util/util-macros">http://xorg.freedesktop.org/releases/individual/util/util-macros</a> ######################################################################## 100.0% </mark>&gt; ./configure --prefix=/private/tmp/makedepend-xfpn/makedepend-1.0.5/xorg-macr <mark>&gt; make install </mark>&gt; ./configure --disable-silent-rules --prefix=/usr/local/Cellar/makedepend/1.0 <mark>&gt; make install /usr/local/Cellar/makedepend/1.0.5: 7 files, 92K, built in 27 seconds </mark>&gt; Installing mysql dependency: openssl <mark>&gt; Downloading <a href="https://www.openssl.org/source/openssl-1.0.1h.tar.gz">https://www.openssl.org/source/openssl-1.0.1h.tar.gz</a> curl: (28) Operation timed out after 6190 milliseconds with 0 out of 0 bytes received Trying a mirror... </mark>&gt; Downloading <a href="http://mirrors.ibiblio.org/openssl/source/openssl-1.0.1h.tar.gz">http://mirrors.ibiblio.org/openssl/source/openssl-1.0.1h.tar.gz</a> ######################################################################## 100.0% <mark>&gt; perl ./Configure --prefix=/usr/local/Cellar/openssl/1.0.1h --openssldir=/usr </mark>&gt; make depend <mark>&gt; make </mark>&gt; make test <mark>&gt; make install MANDIR=/usr/local/Cellar/openssl/1.0.1h/share/man MANSUFFIX=ssl </mark>&gt; Caveats A CA file has been bootstrapped using certificates from the system keychain. To add additional certificates, place .pem files in /usr/local/etc/openssl/certs and run /usr/local/opt/openssl/bin/c<em>rehash This formula is keg-only, so it was not symlinked into /usr/local. Mac OS X already provides this software and installing another version in parallel can cause all kinds of trouble. The OpenSSL provided by OS X is too old for some software. Generally there are no consequences of this for you. If you build your own software and it requires this formula, you'll need to add to your build variables: LDFLAGS: -L/usr/local/opt/openssl/lib CPPFLAGS: -I/usr/local/opt/openssl/include <mark>&gt; Summary /usr/local/Cellar/openssl/1.0.1h: 429 files, 15M, built in 4.1 minutes </mark>&gt; Installing mysql <mark>&gt; Downloading <a href="http://cdn.mysql.com/Downloads/MySQL-5.6/mysql-5.6.20.tar.gz">http://cdn.mysql.com/Downloads/MySQL-5.6/mysql-5.6.20.tar.gz</a> ######################################################################## 100.0% </mark>&gt; cmake . -DCMAKE</em>INSTALL<em>PREFIX=/usr/local/Cellar/mysql/5.6.20 -DCMAKE</em>FIND<em>F <mark>&gt; make </mark>&gt; make install <mark>&gt; Caveats A "/etc/my.cnf" from another install may interfere with a Homebrew-built server starting up correctly. To connect: mysql -uroot To have launchd start mysql at login: ln -sfv /usr/local/opt/mysql/*.plist ~/Library/LaunchAgents Then to load mysql now: launchctl load ~/Library/LaunchAgents/homebrew.mxcl.mysql.plist Or, if you don't want/need launchctl, you can just run: mysql.server start </mark>&gt; /usr/local/Cellar/mysql/5.6.20/bin/mysql</em>install_db --verbose --user=dannywa <mark>&gt; Summary /usr/local/Cellar/mysql/5.6.20: 9578 files, 339M, built in 7.2 minutes</mark></p>

<p>Now that's pretty amazing to me, and where homebrew is really worth its salt. All of those dependencies managed, auto downloaded, configured, and installed: cmake, pkg-config, makedepend, openssl, and finally mysql. There's no way I could have done that in 7.2 minutes manually.</p>

<p>Generally MySQL runs at a high enough port that it can run in user space, so you don't need to sudo it into the /Library/LaunchAgents folder, it's ok to run it from your home folder, so go ahead and follow the instruction on screen:</p>

<p><span class="lang:sh decode:true  crayon-inline ">ln -sfv /usr/local/opt/mysql/*.plist ~/Library/LaunchAgents; launchctl load ~/Library/LaunchAgents/homebrew.mxcl.mysql.plist</span></p>

<p>That will load MySQL. Now we'll test it and make some configuration changes. In shell we will connect to the mysql server:</p>

<p><span class="lang:sh decode:true  crayon-inline ">mysql -u root</span></p>

<p>You will now drop into a MySQL prompt that should look something like this:</p>

<p>Welcome to the MySQL monitor. Commands end with ; or \g. Your MySQL connection id is 3 Server version: 5.6.20 Homebrew Copyright (c) 2000, 2014, Oracle and/or its affiliates. All rights reserved. Oracle is a registered trademark of Oracle Corporation and/or its affiliates. Other names may be trademarks of their respective owners. Type 'help;' or '\h' for help. Type '\c' to clear the current input statement. mysql&gt;</p>

<p>Notice that we have version 5.6.20 Homebrew - helpful in identifying that we are connected to the <em>correct</em> database. Now at the prompt (<code>mysql &gt;</code>) we will set a password for the root account. It's not only good practice, it's required by some software. Obviously in a production server you would worry about security- but for a dev server using root is A-OK in my book. To set the root password enter this command:</p>

<p><span class="lang:sh decode:true  crayon-inline ">exit</span></p>

<p>No, that didn't really change the root password. That simply disconnected from the MySQL server and dropped us back into our standard shell. You see, there's a simple command called <code>mysqladmin</code> that's been installed for us as well which makes it much easier to change the password. Now we will use this command:</p>

<p><span class="lang:sh decode:true  crayon-inline ">mysqladmin -u root password "newpwd"</span></p>

<p>Please substitute "newpwd" for the password you want to use for the root account. I use "root" (no quotes). Again- it's a dev. server. Remember that the MySQL docs recommend only alphanumeric characters for MySQL passwords. If you run into log in issues later it might be because of special characters. Now, let's try to connect to mysql again as above and you should get an error:</p>

<p>mysql -u root ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)</p>

<p>If you want to connect via terminal in the future you will have to use the <code>-p</code> flag like so:</p>

<p><span class="lang:sh decode:true  crayon-inline ">mysql -u root -p</span></p>

<p>After which you will be prompted for the password which you just set.</p>

<p>For now that's the basic configuration of MySQL, we'll cover creating databases later when we go into Moodle setup.</p>

<h2 id="php">PHP</h2>

<p><a href="http://php.net/">PHP</a> is one of the most popular dynamic languages out there. It's robust, it's solid, and it's what Moodle uses. So let's install it. Once again, OS X ships with PHP installed, but we're going to disable it and replace with the Homebrew version. My shipped version is 5.5.9 (cli) which was released on Feb 4, 2014. The latest stable version is 5.5.15:</p>

<p>php -v PHP 5.5.9 (cli) (built: Jun 28 2014 15:59:38) Copyright (c) 1997-2014 The PHP Group Zend Engine v2.5.0, Copyright (c) 1998-2014 Zend Technologies</p>

<p>Now, before we install PHP we need to remember that Moodle requires and recommends a lot of submodules:</p>

<ul>
<li>php</li>
<li>pcreunicode</li>
<li>php_extension iconv</li>
<li>php_extension mbstring</li>
<li>php_extension curl</li>
<li>php_extension openssl</li>
<li>php_extension tokenizer</li>
<li>php_extension xmlrpc</li>
<li>php_extension soap</li>
<li>php_extension ctype</li>
<li>php_extension zip</li>
<li>php_extension zlib</li>
<li>php_extension gd</li>
<li>php_extension simplexml</li>
<li>php_extension spl</li>
<li>php_extension pcre</li>
<li>php_extension dom</li>
<li>php_extension xml</li>
<li>php_extension intl</li>
<li>php_extension json</li>
<li>php_extension hash</li>
</ul>

<p>Man that's a lot of requirements/recommendations, fortunately Homebrew is going to provide us a lot of flexibility in getting everything installed. First we're going to need to tap two new repositories 'versions' and 'homebrew-php':</p>

<p><span class="lang:sh decode:true  crayon-inline ">brew tap homebrew/versions; brew tap homebrew/homebrew-php</span></p>

<p>If everything goes well your output should look something like this:</p>

<p>brew tap homebrew/versions Cloning into '/usr/local/Library/Taps/homebrew/homebrew-versions'... remote: Counting objects: 2274, done. remote: Compressing objects: 100% (42/42), done. remote: Total 2274 (delta 18), reused 4 (delta 2) Receiving objects: 100% (2274/2274), 729.39 KiB | 338.00 KiB/s, done. Resolving deltas: 100% (1278/1278), done. Checking connectivity... done. Tapped 160 formulae dannywahlmbp:~ dannywahl$ brew tap homebrew/homebrew-php Cloning into '/usr/local/Library/Taps/homebrew/homebrew-php'... remote: Counting objects: 6685, done. remote: Compressing objects: 100% (5/5), done. remote: Total 6685 (delta 0), reused 1 (delta 0) Receiving objects: 100% (6685/6685), 1.32 MiB | 691.00 KiB/s, done. Resolving deltas: 100% (4322/4322), done. Checking connectivity... done. Tapped 408 formulae</p>

<p>Next you'll need to decide which version of PHP you want. I'm going to use PHP 5.6 even though it's only at RC1 as of this writing because I really want to try <a href="http://phpdbg.com/">phpdbg</a>. If nobody tests release versions of software then how will the bugs be found? Let's take a look at what options are available to us by running this command:</p>

<p><span class="lang:sh decode:true  crayon-inline ">brew options php56</span></p>

<p>and we get quite a few options:</p>

<p>brew options php56 --disable-opcache Build without Opcache extension --homebrew-apxs Build against apxs in Homebrew prefix --with-apache Enable building of shared Apache 2.0 Handler module, overriding any options which disable apache --with-cgi Enable building of the CGI executable (implies --without-apache) --with-debug Compile with debugging symbols --with-fpm Enable building of the fpm SAPI executable (implies --without-apache) --with-gmp Build with gmp support --with-homebrew-curl Include Curl support via Homebrew --with-homebrew-libxslt Include LibXSLT support via Homebrew --with-homebrew-openssl Include OpenSSL support via Homebrew --with-imap Include IMAP extension --with-intl Include internationalization support --with-libmysql Include (old-style) libmysql support instead of mysqlnd --with-mssql Include MSSQL-DB support --with-pdo-oci Include Oracle databases (requries ORACLE_HOME be set) --with-pgsql Include PostgreSQL support --with-phpdbg Enable building of the phpdbg SAPI executable (PHP 5.4 and above) --with-thread-safety Build with thread safety --with-tidy Include Tidy support --without-bz2 Build without bz2 support --without-mysql Remove MySQL/MariaDB support --without-pcntl Build without Process Control support --without-pear Build without PEAR --HEAD install HEAD version</p>

<p>Even though it's probably not required for php56 I'm going to use the <code>--with-phpdbg</code> flag just to be safe. In addition I'm going to use a few other options for homebrew versions of software. Since we've already installed Homebrew OpenSSL we'll use that, as well as APXS and Curl. Apxs is a tool for building Apache modules (like PHP) - since we're using a newer version of Apache than shipped with OS X we should probably use a newer version of APXS too. Curl is another one of those tools that's slightly outdated and we may as well use the latest stable version. The version on my system is 7.30.0, and at the time of this writing the version shipping with Homebrew is 7.37.1. I've also used <code>--with-tidy</code> because if I recall correctly Moodle text editors can leverage it for WYSIWYG input. Finally, notice that we're not using the <code>--with-intl</code> flag, that's because currently intl is broken and we'll have to install a separate package after PHP builds. Here's my full install command (copy and paste):</p>

<p><span class="lang:sh decode:true  crayon-inline ">brew install php56 --homebrew-apxs --with-apache --with-homebrew-curl --with-homebrew-openssl --with-phpdbg --with-tidy</span></p>

<p>If you get an error about missing bzip2 like this:</p>

<p>&gt; ./configure --prefix=/usr/local/Cellar/php56/5.6.0-rc.2 --localstatedir=/usr checking for gzgets in -lz... yes checking whether to enable bc style precision math functions... yes checking for BZip2 support... yes checking for BZip2 in default path... not found configure: error: Please reinstall the BZip2 distribution READ THIS: <a href="https://github.com/Homebrew/homebrew/wiki/troubleshooting">https://github.com/Homebrew/homebrew/wiki/troubleshooting</a> If reporting this issue please do so at (not Homebrew/homebrew): <a href="https://github.com/homebrew/homebrew-php/issues">https://github.com/homebrew/homebrew-php/issues</a> /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core<em>ext/kernel</em>require.rb:55:in <code>require': Class is not a module (TypeError) from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:55:in</code>require' from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http.rb:390:in <code>&lt;http&gt;' from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http.rb:384:in</code><net>' from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http.rb:25:in <code>&lt;top&gt;' from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:55:in</code>require' from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core<em>ext/kernel</em>require.rb:55:in <code>require' from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/https.rb:21:in</code><top>' from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core<em>ext/kernel</em>require.rb:55:in <code>require' from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:55:in</code>require' from /usr/local/Library/Homebrew/utils.rb:308:in <code>open' from /usr/local/Library/Homebrew/utils.rb:350:in</code>issues<em>matching' from /usr/local/Library/Homebrew/utils.rb:378:in <code>issues_for_formula' from /usr/local/Library/Homebrew/exceptions.rb:171:in</code>fetch</em>issues' from /usr/local/Library/Homebrew/exceptions.rb:167:in <code>issues' from /usr/local/Library/Homebrew/exceptions.rb:207:in</code>dump' from /usr/local/Library/brew.rb:158:in <code>rescue in &lt;main&gt;' from /usr/local/Library/brew.rb:66:in</code><main>'</main></top></net></p></section></article></main>

<p>Then you will need to edit the formula to set the path of your bzip2 binary manually. First, find where your bzip2 binary is located with the following command:</p>

<p><span class="lang:sh decode:true  crayon-inline ">which bzip2</span></p>

<p>Then edit the forumula for php:</p>

<p><span class="lang:sh decode:true  crayon-inline ">brew edit php56</span></p>

<p>and add this line:</p>

<p><span class="lang:sh decode:true  crayon-inline ">args </span></p>

<p>after these lines:</p>

<p>def install_args args = super</p>

<p>Another common error that seems to be occuring, and has been reported (<a href="https://github.com/Homebrew/homebrew-php/issues/1268">here</a>) is a compilation error while building phar. The basic error is:</p>

<p><span class="lang:sh decode:true  crayon-inline ">make: <em>*</em> [ext/phar/phar.phar] Illegal instruction: 4 </span></p>

<p>or</p>

<p><span class="lang:sh decode:true  crayon-inline ">/Library/Ruby/Site/2.0.0/rubygems/core<em>ext/kernel</em>require.rb:55:in require': Class is not a module (TypeError)</span></p>

<p>I found this to be an error of trying to use Homebrew's OpenSSL, either by setting it as the default on the system or using the <code>--with-homebrew-ssl</code> flag. So for now my build is using the system version of OpenSSL. If the build goes correctly then your total output should look something like this:</p>

<p>brew install php56 --homebrew-apxs --with-apache --with-homebrew-curl --with-phpdbg --with-tidy <mark>&gt; Installing dependencies for php56: curl, libpng, freetype, xz, gettex </mark>&gt; Installing php56 dependency: curl <mark>&gt; Downloading <a href="http://curl.haxx.se/download/curl-7.37.1.tar.gz">http://curl.haxx.se/download/curl-7.37.1.tar.gz</a> ######################################################################## 100.0% </mark>&gt; ./configure --prefix=/usr/local/Cellar/curl/7.37.1 --with-darwinssl --withou <mark>&gt; make install </mark>&gt; Caveats This formula is keg-only, so it was not symlinked into /usr/local. Mac OS X already provides this software and installing another version in parallel can cause all kinds of trouble. Generally there are no consequences of this for you. If you build your own software and it requires this formula, you'll need to add to your build variables: LDFLAGS: -L/usr/local/opt/curl/lib CPPFLAGS: -I/usr/local/opt/curl/include <mark>&gt; Summary /usr/local/Cellar/curl/7.37.1: 285 files, 2.8M, built in 91 seconds </mark>&gt; Installing php56 dependency: libpng <mark>&gt; Downloading <a href="https://downloads.sf.net/project/libpng/libpng16/1.6.12/libpng-1">https://downloads.sf.net/project/libpng/libpng16/1.6.12/libpng-1</a> ######################################################################## 100.0% </mark>&gt; ./configure --disable-silent-rules --prefix=/usr/local/Cellar/libpng/1.6.12 <mark>&gt; make install /usr/local/Cellar/libpng/1.6.12: 17 files, 1.2M, built in 24 seconds </mark>&gt; Installing php56 dependency: freetype <mark>&gt; Downloading <a href="https://downloads.sf.net/project/freetype/freetype2/2.5.3/freety">https://downloads.sf.net/project/freetype/freetype2/2.5.3/freety</a> ######################################################################## 100.0% </mark>&gt; ./configure --prefix=/usr/local/Cellar/freetype/2.5.3<em>1 --without-harfbuzz <mark>&gt; make </mark>&gt; make install /usr/local/Cellar/freetype/2.5.3</em>1: 60 files, 2.5M, built in 26 seconds <mark>&gt; Installing php56 dependency: xz </mark>&gt; Downloading <a href="http://fossies.org/linux/misc/xz-5.0.5.tar.gz">http://fossies.org/linux/misc/xz-5.0.5.tar.gz</a> ######################################################################## 100.0% <mark>&gt; ./configure --prefix=/usr/local/Cellar/xz/5.0.5 </mark>&gt; make install /usr/local/Cellar/xz/5.0.5: 58 files, 1.5M, built in 34 seconds <mark>&gt; Installing php56 dependency: gettext </mark>&gt; Downloading <a href="http://ftpmirror.gnu.org/gettext/gettext-0.19.2.tar.xz">http://ftpmirror.gnu.org/gettext/gettext-0.19.2.tar.xz</a> ######################################################################## 100.0% <mark>&gt; ./configure --prefix=/usr/local/Cellar/gettext/0.19.2 --with-included-gettex </mark>&gt; make <mark>&gt; make install </mark>&gt; Caveats This formula is keg-only, so it was not symlinked into /usr/local. OS X provides the BSD gettext library and some software gets confused if both are in the library path. Generally there are no consequences of this for you. If you build your own software and it requires this formula, you'll need to add to your build variables: LDFLAGS: -L/usr/local/opt/gettext/lib CPPFLAGS: -I/usr/local/opt/gettext/include <mark>&gt; Summary /usr/local/Cellar/gettext/0.19.2: 1920 files, 18M, built in 5.3 minutes </mark>&gt; Installing php56 dependency: jpeg <mark>&gt; Downloading <a href="http://www.ijg.org/files/jpegsrc.v8d.tar.gz">http://www.ijg.org/files/jpegsrc.v8d.tar.gz</a> ######################################################################## 100.0% </mark>&gt; ./configure --prefix=/usr/local/Cellar/jpeg/8d <mark>&gt; make install /usr/local/Cellar/jpeg/8d: 18 files, 780K, built in 21 seconds </mark>&gt; Installing php56 dependency: autoconf <mark>&gt; Downloading <a href="http://ftpmirror.gnu.org/autoconf/autoconf-2.69.tar.gz">http://ftpmirror.gnu.org/autoconf/autoconf-2.69.tar.gz</a> ######################################################################## 100.0% </mark>&gt; ./configure --prefix=/usr/local/Cellar/autoconf/2.69 <mark>&gt; make install /usr/local/Cellar/autoconf/2.69: 70 files, 3.1M, built in 28 seconds </mark>&gt; Installing php56 dependency: automake <mark>&gt; Downloading <a href="http://ftpmirror.gnu.org/automake/automake-1.14.1.tar.gz">http://ftpmirror.gnu.org/automake/automake-1.14.1.tar.gz</a> ######################################################################## 100.0% </mark>&gt; ./configure --prefix=/usr/local/Cellar/automake/1.14.1 <mark>&gt; make install /usr/local/Cellar/automake/1.14.1: 131 files, 3.2M, built in 37 seconds </mark>&gt; Installing php56 dependency: libtool <mark>&gt; Downloading <a href="http://ftpmirror.gnu.org/libtool/libtool-2.4.2.tar.gz">http://ftpmirror.gnu.org/libtool/libtool-2.4.2.tar.gz</a> ######################################################################## 100.0% </mark>&gt; Patching patching file libltdl/config/ltmain.sh <mark>&gt; ./configure --prefix=/usr/local/Cellar/libtool/2.4.2 --program-prefix=g --en </mark>&gt; make install <mark>&gt; Caveats In order to prevent conflicts with Apple's own libtool we have prepended a "g" so, you have instead: glibtool and glibtoolize. </mark>&gt; Summary /usr/local/Cellar/libtool/2.4.2: 69 files, 2.5M, built in 46 seconds <mark>&gt; Installing php56 dependency: homebrew/dupes/tidy </mark>&gt; Downloading ftp://mirror.internode.on.net/pub/gentoo/distfiles/tidy-20090325 ######################################################################## 100.0% <mark>&gt; sh build/gnuauto/setup.sh </mark>&gt; ./configure --prefix=/usr/local/Cellar/tidy/20090325 --mandir=/usr/local/Cel <mark>&gt; make install /usr/local/Cellar/tidy/20090325: 10 files, 940K, built in 43 seconds </mark>&gt; Installing php56 dependency: unixodbc <mark>&gt; Downloading <a href="http://www.unixodbc.org/unixODBC-2.3.2.tar.gz">http://www.unixodbc.org/unixODBC-2.3.2.tar.gz</a> ######################################################################## 100.0% </mark>&gt; ./configure --prefix=/usr/local/Cellar/unixodbc/2.3.2 --enable-gui=no <mark>&gt; make install /usr/local/Cellar/unixodbc/2.3.2: 31 files, 960K, built in 2.4 minutes </mark>&gt; Installing php56 <mark>&gt; Downloading <a href="http://downloads.php.net/tyrael/php-5.6.0RC3.tar.bz2">http://downloads.php.net/tyrael/php-5.6.0RC3.tar.bz2</a> ######################################################################## 100.0% Warning: Backing up all known pear.conf and .pearrc files Warning: If you have a pre-existing pear install outside of homebrew-php, or you are using a non-standard pear.conf location, installation may fail. </mark>&gt; ./configure --prefix=/usr/local/Cellar/php56/5.6.0-rc.3 --localstatedir=/usr <mark>&gt; make </mark>&gt; make install <mark>&gt; /usr/local/Cellar/php56/5.6.0-rc.3/bin/pear config-set php<em>ini /usr/local/et </em></mark>&gt; Caveats To enable PHP in Apache add the following to httpd.conf and restart Apache: LoadModule php5module /usr/local/opt/php56/libexec/apache2/libphp5.so The php.ini file can be found in: /usr/local/etc/php/5.6/php.ini ✩✩✩✩ PEAR ✩✩✩✩ If PEAR complains about permissions, 'fix' the default PEAR permissions and config: chmod -R ug+w /usr/local/Cellar/php56/5.6.0-rc.3/lib/php pear config-set php_ini /usr/local/etc/php/5.6/php.ini ✩✩✩✩ Extensions ✩✩✩✩ If you are having issues with custom extension compiling, ensure that you are using the brew version, by placing /usr/local/bin before /usr/sbin in your PATH: PATH="/usr/local/bin:$PATH" PHP56 Extensions will always be compiled against this PHP. Please install them using --without-homebrew-php to enable compiling against system PHP. ✩✩✩✩ PHP CLI ✩✩✩✩ If you wish to swap the PHP you use on the command line, you should add the following to ~/.bashrc, ~/.zshrc, ~/.profile or your shell's equivalent configuration file: export PATH="$(brew --prefix homebrew/php/php56)/bin:$PATH" To have launchd start php56 at login: ln -sfv /usr/local/opt/php56/*.plist ~/Library/LaunchAgents Then to load php56 now: launchctl load ~/Library/LaunchAgents/homebrew.mxcl.php56.plist <mark>&gt; Summary /usr/local/Cellar/php56/5.6.0-rc.3: 497 files, 50M, built in 5.9 minutes</mark></p>

<p>As you can see looking at the caveats there are still a few steps we need to do. First we will fix the PEAR permissions, this might not be necessary, but it won't hurt anything so go ahead and copy and paste these commands into the terminal:</p>

<p>chmod -R ug+w /usr/local/Cellar/php56/5.6.0-rc.3/lib/php pear config-set php_ini /usr/local/etc/php/5.6/php.ini</p>

<p>Next we'll make sure that PHP gets loaded at login by the launchd and load it now, too:</p>

<p>ln -sfv /usr/local/opt/php56/*.plist ~/Library/LaunchAgents launchctl load ~/Library/LaunchAgents/homebrew.mxcl.php56.plist</p>

<p>Then we'll check our command line version. First, exit or Quit Terminal and reopen it, then run this command in terminal:</p>

<p><span class="lang:sh decode:true  crayon-inline ">php -v</span></p>

<p>The output should have 5.6 listed as the version, like this:</p>

<p>php -v PHP 5.6.0RC3 (cli) (built: Aug 7 2014 10:21:55) Copyright (c) 1997-2014 The PHP Group Zend Engine v2.6.0-dev, Copyright (c) 1998-2014 Zend Technologies</p>

<p>If it lists 5.5 as the version then you need to update you $PATH variable. Depending on the version of shell your're running you need to add the following line to your terminal config (default ~/.profile). The following commands should add it for you:</p>

<p>touch ~/.profile cat &gt;&gt; ~/.profile Now you can exit Terminal and reopen it and run <code>php -v</code> again.</p>

<p>Finally you need to add the php handlers to the httpd.conf. Open up <code>/usr/local/etc/apache2/2.4/httpd.conf</code> and add the following three lines to the document:</p>

<p>LoadModule php5_module /usr/local/opt/php56/libexec/apache2/libphp5.so AddHandler php5-script .php AddType text/html .php</p>

<p>and find the line that starts with <code>DirectoryIndex</code> and change it to read:</p>

<p><span class="lang:sh decode:true  crayon-inline ">DirectoryIndex index.php index.html</span></p>

<p>Save the document and then restart the httpd service with the following command:</p>

<p><span class="lang:sh decode:true  crayon-inline ">sudo httpd -k restart</span></p>

<p>Now we having functioning PHP on our server, but remember we need to install <code>intl</code> separately, so go back to terminal and run the following command:</p>

<p><span class="lang:sh decode:true  crayon-inline ">brew install php56-intl</span></p>

<p>When it finishes building you should have output similar to this:</p>

<p>brew install php56-intl &gt; Installing php56-intl dependency: icu4c <mark>&gt; Downloading <a href="http://download.icu-project.org/files/icu4c/52.1/icu4c-52">http://download.icu-project.org/files/icu4c/52.1/icu4c-52</a><em>1-src. ######################################################################## 100.0% </em></mark>&gt; ./configure --prefix=/usr/local/Cellar/icu4c/52.1 --disable-samples --disabl <mark>&gt; make VERBOSE=1 </mark>&gt; make VERBOSE=1 install <mark>&gt; Caveats This formula is keg-only, so it was not symlinked into /usr/local. Conflicts; see: <a href="https://github.com/Homebrew/homebrew/issues/issue/167">https://github.com/Homebrew/homebrew/issues/issue/167</a> Generally there are no consequences of this for you. If you build your own software and it requires this formula, you'll need to add to your build variables: LDFLAGS: -L/usr/local/opt/icu4c/lib CPPFLAGS: -I/usr/local/opt/icu4c/include </mark>&gt; Summary /usr/local/Cellar/icu4c/52.1: 239 files, 60M, built in 2.6 minutes <mark>&gt; Installing php56-intl </mark>&gt; Downloading <a href="http://downloads.php.net/tyrael/php-5.6.0RC3.tar.bz2">http://downloads.php.net/tyrael/php-5.6.0RC3.tar.bz2</a> ######################################################################## 100.0% <mark>&gt; PHPAUTOCONF="/usr/local/opt/autoconf/bin/autoconf" PHP_AUTOHEADER="/usr/loc </mark>&gt; ./configure --prefix=/usr/local/Cellar/php56-intl/5.6.0-rc.3 --with-php-conf <mark>&gt; make </mark>&gt; Caveats To finish installing intl for PHP 5.6: * /usr/local/etc/php/5.6/conf.d/ext-intl.ini was created, do not forget to remove it upon extension removal. * Validate installation via one of the following methods: * * Using PHP from a webserver: * - Restart your webserver. * - Write a PHP page that calls "phpinfo();" * - Load it in a browser and look for the info on the intl module. * - If you see it, you have been successful! * * Using PHP from the command line: * - Run "php -i" (command-line "phpinfo()") * - Look for the info on the intl module. * - If you see it, you have been successful! <mark>&gt; Summary /usr/local/Cellar/php56-intl/5.6.0-rc.3: 3 files, 360K, built in 52 seconds brew install composer </mark>&gt; Downloading <a href="http://getcomposer.org/download/1.0.0-alpha8/composer.phar">http://getcomposer.org/download/1.0.0-alpha8/composer.phar</a> ######################################################################## 100.0% <mark>&gt; Caveats Verify your installation by running: "composer --version". You can read more about composer and packagist by running: "brew home composer". </mark>&gt; Summary /usr/local/Cellar/composer/1.0.0-alpha8: 3 files, 952K, built in 3 seconds</p>

<p>And there we have it! That will give us every required Moodle php extension, except for opcache, which at the time of this writing is <a href="https://github.com/Homebrew/homebrew-php/issues/1100">not compatible with PHP 5.6</a>. When it does become available you can simply run <code>brew install php56-opcache</code> and you're done.</p>

<h3 id="wrappingup">Wrapping Up</h3>

<p>That's the end of the first part of this extensive walk through of setting up a Moodle development server. This first part should really help anyone doing any sort of PHP development on a Mac whether it's WordPress, Drupal, or whatever. In part two we'll dive into configuring Apache and MySQL for Moodle development as well how to use the MDK, git, and JIRA to contribute your code and bug fixes back to the community.</p>

<p>If you need help with educational technology in your institution, from strategic planning, to implementation, to technical support contact us and we can help get you on the path to success.</p>
			<div id="disqus_thread"></div>
				<script type="text/javascript">
					/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
					var disqus_shortname = 'iyware'; // required: replace example with your forum shortname
					/* * * DON'T EDIT BELOW THIS LINE * * */
					(function() {
						var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
						dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
						(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
					})();
					</script>
					<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        

        <footer class="post-footer">


            <figure class="author-image">
                <a class="img" href="../author/danny/" style="background-image: url(../content/images/2015/01/743499.jpg)"><span class="hidden">Danny Wahl's Picture</span></a>
            </figure>

            <section class="author">
                <h4><a href="../author/danny/">Danny Wahl</a></h4>

                    <p>My name is Danny Wahl and I provide Ed Tech consulting to international schools in the APAC region. I dabble in writing, programming, design, and ukulele playing.</p>
                <div class="author-meta">
                    
                    
                </div>
            </section>


            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="https://twitter.com/share?text=OS%20X%2010.10%20Yosemite%2C%20Apache%2C%20MySQL%2C%20PHP%205.6%2C%20(MAMP)%20Homebrew%20Dev%20Setup&amp;url=http://www.iyware.com/osx-yosemite-mamp-homebrew-development-setup/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://www.iyware.com/osx-yosemite-mamp-homebrew-development-setup/" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=http://www.iyware.com/osx-yosemite-mamp-homebrew-development-setup/" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>

        </footer>

    





    <footer class="site-footer clearfix">
         <section class="copyright"><a href="http://www.iyware.com">iyWare</a> © 2015</section>
         <section class="poweredby">Proudly published with <a href="https://ghost.org">Ghost</a></section>
    </footer>

    <script src="../public/jquery.js?v=c7bfc3f1e8"></script>

    <script type="text/javascript" src="../assets/js/jquery.fitvids.js?v=c7bfc3f1e8"></script>
    <script type="text/javascript" src="../assets/js/index.js?v=c7bfc3f1e8"></script>
	
    <script type="text/javascript" src="../assets/js/prism.min.js?v=c7bfc3f1e8"></script>
    
    <script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
		ga('create', 'UA-XXXX-Y', 'auto');
		ga('send', 'pageview');
	</script>

</body>
