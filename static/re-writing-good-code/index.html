
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>(Re-)Writing Good Code</title>
    <meta name="description" content="">

    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="shortcut icon" href="../favicon.ico">

    <link rel="stylesheet" type="text/css" href="../assets/css/screen.css?v=c7bfc3f1e8">
	<link rel="stylesheet" type="text/css" href="../assets/css/prism.min.css?v=c7bfc3f1e8">

    <link rel="canonical" href="http://www.iyware.com/re-writing-good-code/">
    
    <meta property="og:site_name" content="iyWare">
    <meta property="og:type" content="article">
    <meta property="og:title" content="(Re-)Writing Good Code">
    <meta property="og:description" content="A few weeks back I published my qTranslate Missing Link code, what I didn’t say in that post was that that was the 3rd revision of the code. And I mean a real v3.0, not a “let’s...">
    <meta property="og:url" content="http://www.iyware.com/re-writing-good-code/">
    <meta property="article:published_time" content="2011-11-05T14:39:53.000Z">
    <meta property="article:modified_time" content="2014-07-21T13:30:03.000Z">
    <meta property="article:tag" content="CSS">
    <meta property="article:tag" content="JavaScript">
    <meta property="article:tag" content="jQuery">
    <meta property="article:tag" content="qTranslate">
    <meta property="article:tag" content="Script">
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="(Re-)Writing Good Code">
    <meta name="twitter:description" content="A few weeks back I published my qTranslate Missing Link code, what I didn’t say in that post was that that was the 3rd revision of the code. And I mean a real v3.0, not a “let’s...">
    <meta name="twitter:url" content="http://www.iyware.com/re-writing-good-code/">
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "iyWare",
    "author": {
        "@type": "Person",
        "name": "Danny Wahl",
        "image": "http://www.iyware.com/content/images/2015/01/743499.jpg",
        "url": "http://www.iyware.com/author/danny",
        "sameAs": null
    },
    "headline": "(Re-)Writing Good Code",
    "url": "http://www.iyware.com/re-writing-good-code/",
    "datePublished": "2011-11-05T14:39:53.000Z",
    "dateModified": "2014-07-21T13:30:03.000Z",
    "keywords": "CSS, JavaScript, jQuery, qTranslate, Script",
    "description": "A few weeks back I published my qTranslate Missing Link code, what I didn’t say in that post was that that was the 3rd revision of the code. And I mean a real v3.0, not a “let’s..."
}
    </script>

    <meta name="generator" content="Ghost 0.5">
    <link rel="alternate" type="application/rss+xml" title="iyWare" href="http://www.iyware.com/rss/">
</head>
<body class="post-template tag-css tag-javascript tag-jquery tag-qtranslate tag-script">

    


<header class="main-header post-head no-cover">
    <nav class="main-nav  clearfix">
        <a class="back-button icon-arrow-left" href="http://www.iyware.com">Home</a>
        <a class="subscribe-button icon-feed" href="http://www.iyware.com/rss/">Subscribe</a>
    </nav>
</header>

<main class="content" role="main">

    <article class="post tag-css tag-javascript tag-jquery tag-qtranslate tag-script">

        <header class="post-header">
            <h1 class="post-title">(Re-)Writing Good Code</h1>
            <section class="post-meta">
                <time class="post-date" datetime="2011-11-05">05 November 2011</time>  on <a href="../tag/css/">CSS</a>, <a href="../tag/javascript/">JavaScript</a>, <a href="../tag/jquery/">jQuery</a>, <a href="../tag/qtranslate/">qTranslate</a>, <a href="../tag/script/">Script</a>
            </section>
        </header>

        <section class="post-content">
            <p>A few weeks back I published my <a href="http://iyware.com/qtranslate-jquery-missing-link/" title="qtranslate + jQuery Missing Link">qTranslate Missing Link</a> code, what I didn’t say in that post was that that was the 3rd revision of the code. And I mean a real v3.0, not a “let’s call it a new version” kind of 3.0 (I’m looking at you Firefox…). What I want to do now is show you revisions 1.0 and 2.0, and how I got them, and then on to the final 3.0. And believe it or not, there’s room (for someone else) to take it to a version 4.</p>

<p>First I needed to define my problem, and I needed to identify how I wanted to develop a fix for it. Defining the problem was easy, there were already threads at <a href="http://mysitemyway.com">mysitemyway.com</a> saying that qTranslate didn’t translate the ‘Home’ link on their themes’ custom menus (which isn’t really mysitemyway’s fault) and there were threads over at the <a href="http://www.qianqin.de/qtranslate/">qTranslate</a> forums saying the same thing for lots of different themes. Now we were on the right track. What I needed to do now is decide how to fix it. The answer became clear almost straight away: <a href="http://jquery.com/">jQuery</a>, simply because that’s what WordPress uses, so I knew it would work.</p>

<p>Since I’ve never used jQuery before (I think I’ve mentioned I’m not a JS guy…) I spent most of the time with this version (1.0) reading jQuery docs, and actually this rev. took the longest to write. Sadly, it’s the ugliest and least pluggable. So here’s the code:</p>

<p>You can see it’s a pretty static script, written specifically to take a single selector in a single language and modify it by appending ‘<code>zh</code>‘ to the end of the <code>href</code>. That “worked” until I needed it in multiple languages. Then I wrote version 2.0:</p>

<p>Well now you can define multiple language, and we’re using a proper <code>switch</code> instead of <code>elif</code>s but still, what if you need multiple selectors per language? Enter version 3.0 (the one I released):</p>

<p>Now we’re talking. This will work for any language, because we’re parsing the actual value of the <code>lang</code> attribute and using that rather than hard coding it. And we’re using <code>jQuery.each</code> to instantiate an array. Not bad if I do say so myself.</p>

<p>So where would a version 3.1 or a version 4.0 go? Pretty simple answer really, v3.1 would optimize the query by evaluating the <code>lang</code> attribute outside of the loop rather than at every iteration, because it doesn’t change and it would optimize readability by instantiating the array outside of the <code>jQuery.each</code> function and then just call the variable. Version 4.0 would switch from using <code>jQuery.each</code> to using a <code>for</code> loop since that’s apparently <a href="http://net.tutsplus.com/tutorials/javascript-ajax/10-ways-to-instantly-increase-your-jquery-performance/">significantly faster</a>.</p>

<p>All of this is to say something that every programmer knows – no code is perfect and there’s always a different (and perhaps better) way to do something. So if I ever do get around to writing a version 4.0 of this script I might wrap it up in a WordPress extension so that any user can plug it into any theme and define the array themselves fixing everyone’s problems (with qTranslate…).</p>
        </section>

        <footer class="post-footer">


            <figure class="author-image">
                <a class="img" href="../author/danny/" style="background-image: url(../content/images/2015/01/743499.jpg)"><span class="hidden">Danny Wahl's Picture</span></a>
            </figure>

            <section class="author">
                <h4><a href="../author/danny/">Danny Wahl</a></h4>

                    <p>My name is Danny Wahl and I provide Ed Tech consulting to international schools in the APAC region. I dabble in writing, programming, design, and ukulele playing.</p>
                <div class="author-meta">
                    
                    
                </div>
            </section>


            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="https://twitter.com/share?text=(Re-)Writing%20Good%20Code&amp;url=http://www.iyware.com/re-writing-good-code/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://www.iyware.com/re-writing-good-code/" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=http://www.iyware.com/re-writing-good-code/" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>

        </footer>

    </article>

</main>



    <footer class="site-footer clearfix">
         <section class="copyright"><a href="http://www.iyware.com">iyWare</a> © 2015</section>
         <section class="poweredby">Proudly published with <a href="https://ghost.org">Ghost</a></section>
    </footer>

    <script src="../public/jquery.js?v=c7bfc3f1e8"></script>

    <script type="text/javascript" src="../assets/js/jquery.fitvids.js?v=c7bfc3f1e8"></script>
    <script type="text/javascript" src="../assets/js/index.js?v=c7bfc3f1e8"></script>
	
    <script type="text/javascript" src="../assets/js/prism.min.js?v=c7bfc3f1e8"></script>
</body>
