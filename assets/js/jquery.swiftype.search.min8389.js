!function(e){function t(e){return String(e).replace(/&/g,"&").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var n=function(e){var t,n,i={};if(""===e)return{};for(t=0;t<e.length;t+=1)n=e[t].split("="),2===n.length&&(i[n[0]]=decodeURIComponent(n[1].replace(/\+/g," ")));return i};e.queryParams=function(){return n(window.location.search.substr(1).split("&"))},e.hashParams=function(){return n(window.location.hash.substr(1).split("&"))},window.Swiftype=window.Swiftype||{},Swiftype.root_url=Swiftype.root_url||"https://api.swiftype.com",Swiftype.pingUrl=function(e,t){var n=setTimeout(t,350),i=new Image;return i.onload=i.onerror=function(){clearTimeout(n),t()},i.src=e,!1},Swiftype.pingSearchResultClick=function(t,n,i){var a={t:(new Date).getTime(),engine_key:t,doc_id:n,q:Swiftype.currentQuery},r=Swiftype.root_url+"/api/v1/public/analytics/pc?"+e.param(a);Swiftype.pingUrl(r,i)},e.fn.swiftypeSearch=function(t){var t=e.extend({},e.fn.swiftypeSearch.defaults,t);return this.each(function(){var n=e(this),i=e.meta?e.extend({},t,n.data()):t;n.data("swiftype-config-search",i),n.selectedCallback=function(t){return function(n){var a=e(this);n.preventDefault(),Swiftype.pingSearchResultClick(i.engineKey,t.id,function(){window.location=a.attr("href")})}},n.registerResult=function(t,i){t.data("swiftype-item",i),e("a",t).click(n.selectedCallback(i))},n.getContentCache=function(){return e("#"+o)};var a=e(i.resultContainingElement),r=a.html(),o="st-content-cache",s=n.getContentCache(),c=function(e,t){location.hash="stq="+encodeURIComponent(e)+"&stp="+t},l=function(t,n){function c(e){if(void 0!==e){var t=e;return"function"==typeof t&&(t=t.call()),t}return void 0}n=e.extend({page:1},n);var l={};s.length||(a.after("<div id='"+o+"' style='display: none;'></div>"),s.html(r).hide()),i.loadingFunction(t,a),Swiftype.currentQuery=t,l.q=t,l.engine_key=i.engineKey,l.page=n.page,l.per_page=i.perPage,l.search_fields=c(i.searchFields),l.fetch_fields=c(i.fetchFields),l.facets=c(i.facets),l.filters=c(i.filters),l.document_types=c(i.documentTypes),l.functional_boosts=c(i.functionalBoosts),l.sort_field=c(i.sortField),l.sort_direction=c(i.sortDirection),l.spelling=c(i.spelling),e.getJSON(Swiftype.root_url+"/api/v1/public/engines/search.json?callback=?",l).success(d)};e(window).hashchange(function(){var t=e.hashParams();if(t.stq)l(t.stq,{page:t.stp});else{var i=n.getContentCache();i.length&&(a.html(i.html()),i.remove())}});var u=n.parents("form");u&&u.bind("submit",function(e){e.preventDefault();var t=n.val();c(t,1)}),e(document).on("click","[data-hash][data-page]",function(t){t.preventDefault();var n=e(this);c(e.hashParams().stq,n.data("page"))}),e(document).on("click","[data-hash][data-spelling-suggestion]",function(t){t.preventDefault();var n=e(this);c(n.data("spelling-suggestion"),1)});var d=function(e){"function"==typeof i.preRenderFunction&&i.preRenderFunction.call(n,e),i.renderResultsFunction(n.getContext(),e),"function"==typeof i.postRenderFunction&&i.postRenderFunction.call(n,e)};n.getContext=function(){return{config:i,resultContainer:a,registerResult:n.registerResult}},e(window).hashchange()})};var i=function(t,n){var i,a=-1,r=t.config;e.each(n,function(e,t){t.num_pages>a&&(i=e,a=t.num_pages)});var o=n[i].current_page,s=n[i].num_pages;e(r.renderPaginationForType(i,o,s)).appendTo(t.resultContainer)},a=function(t,n){var a=t.resultContainer,r=t.config;a.html(""),e.each(n.records,function(n,i){e.each(i,function(i,o){t.registerResult(e(r.renderFunction(n,o)).appendTo(a),o)})}),i(t,n.info)},r=function(e,n){return'<div class="st-result"><h3 class="title"><a href="'+n.url+'" class="st-search-result-link">'+t(n.title)+"</a></h3></div>"},o=function(e,t){t.html('<p class="st-loading-message">loading...</p>')},s=function(t){var n=0,i=this.getContext().resultContainer,a=null;t.info&&e.each(t.info,function(e,t){n+=t.total_result_count,t.spelling_suggestion&&(a=t.spelling_suggestion.text)}),0===n&&i.html("<div id='st-no-results' class='st-no-results'>No results found.</div>"),null!==a&&i.append('<div class="st-spelling-suggestion">Did you mean <a href="#" data-hash="true" data-spelling-suggestion="'+a+'">'+a+"</a>?</div>")},c=function(e,t,n){var i,a,r='<div class="st-page">';return 1!=t&&(i=t-1,r=r+'<a href="#" class="st-prev" data-hash="true" data-page="'+i+'">&laquo; previous</a>'),n>t&&(a=t+1,r=r+'<a href="#" class="st-next" data-hash="true" data-page="'+a+'">next &raquo;</a>'),r+="</div>"};e.fn.swiftypeSearch.defaults={attachTo:void 0,documentTypes:void 0,facets:void 0,filters:void 0,engineKey:void 0,searchFields:void 0,functionalBoosts:void 0,sortField:void 0,sortDirection:void 0,fetchFields:void 0,preRenderFunction:void 0,postRenderFunction:s,loadingFunction:o,renderResultsFunction:a,renderFunction:r,renderPaginationForType:c,perPage:10,spelling:"strict"}}(jQuery);