<!doctype html><html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Making WordPress Password Protected Posts Private</title>
    <meta name="description" content="">

    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="shortcut icon" href="../favicon.ico">

    <link rel="stylesheet" type="text/css" href="../assets/css/screen.min.css?v=d02990e32b">

    <link rel="canonical" href="http://iyware.com/making-wordpress-password-protected-posts-private/">
    
    <meta property="og:site_name" content="iyWare">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Making WordPress Password Protected Posts Private">
    <meta property="og:description" content="Boy that’s a lot of ‘P’s! Let’s just jump right in, shall we. Here’s the scenario, a user creates a post that they only want to share with select people because of the private nature of...">
    <meta property="og:url" content="http://iyware.com/making-wordpress-password-protected-posts-private/">
    <meta property="article:published_time" content="2011-11-28T12:37:43.000Z">
    <meta property="article:modified_time" content="2013-10-08T20:59:06.000Z">
    <meta property="article:tag" content="HTML">
    <meta property="article:tag" content="PHP">
    <meta property="article:tag" content="Theme">
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Making WordPress Password Protected Posts Private">
    <meta name="twitter:description" content="Boy that’s a lot of ‘P’s! Let’s just jump right in, shall we. Here’s the scenario, a user creates a post that they only want to share with select people because of the private nature of...">
    <meta name="twitter:url" content="http://iyware.com/making-wordpress-password-protected-posts-private/">
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "iyWare",
    "author": {
        "@type": "Person",
        "name": "Danny Wahl",
        "image": "http://iyware.com/content/images/2015/01/me.jpg",
        "url": "http://iyware.com/author/danny",
        "sameAs": null
    },
    "headline": "Making WordPress Password Protected Posts Private",
    "url": "http://iyware.com/making-wordpress-password-protected-posts-private/",
    "datePublished": "2011-11-28T12:37:43.000Z",
    "dateModified": "2013-10-08T20:59:06.000Z",
    "keywords": "HTML, PHP, Theme",
    "description": "Boy that’s a lot of ‘P’s! Let’s just jump right in, shall we. Here’s the scenario, a user creates a post that they only want to share with select people because of the private nature of..."
}
    </script>

    <meta name="generator" content="Ghost 0.5">
    <link rel="alternate" type="application/rss+xml" title="iyWare" href="http://iyware.com/rss/">
</head>
<body class="post-template tag-html tag-php tag-theme  noimage">

    


    <article role="main" class="">
        <header class="group">
            <a href="../" id="home_link">«</a>
            <div class="hgroup">
            	<h1>Making WordPress Password Protected Posts Private</h1>
            	<div class="meta">
            		<time datetime="2011-11-28">November 28, 2011</time>
            		 • 
					<span class="tags"><a href="../tag/html/">HTML</a>, <a href="../tag/php/">PHP</a>, <a href="../tag/theme/">Theme</a></span>
            	</div>
			</div>
        </header>

        <div class="text" id="js-post-content">
            <p>Boy that’s a lot of ‘P’s! Let’s just jump right in, shall we. Here’s the scenario, a user creates a post that they only want to share with select people because of the private nature of the post (notice I say post, not “content”) so they password their post and publish it. WordPress by default will block <code>the_content()</code> from displaying as well as <code>comments_template()</code>. That’s good! What’s not good is the amount of thing it doesn’t block. For example:</p>

<ul>
<li>Post Title</li>
<li>Author</li>
<li>Post Date &amp; time</li>
<li>Featured Image</li>
<li>The fact that comments are enabled</li>
<li>The post shows up in search &amp; archives</li>
</ul>

<p>There may be other things but this was the quick set I saw that I knew I needed to change. Turns out we can do this in just a couple of quick steps. First let’s look at what might be a standard single.php:</p>

<p>Pretty simple, let’s break it down: Grab the header, the the author, time, and featured image, then the content and the comments. The only thing that wouldn’t show up would be the comments and the content. The title would also be prefixed with “Protected: “. That sure is a lot of information for a “Protected” post. Let’s fix that.</p>

<h3 id="singlephp">single.php</h3>

<p>The first step is to add a conditional to our above code, fortunately there’s an article class called <code>post-password-required</code> when a post is passworded and the user hasn’t input the password before. We’re going to leverage that by using the php function <code>&lt;a href="http://php.net/manual/en/function.in-array.php"&gt;in_array()&lt;/a&gt;</code>.</p>

<p>So if the post is going to require a password, we don’t serve any of that other content, just <code>the_content()</code>. We don’t even give them the title of the article.</p>

<p>Next we’re going to remove our protected posts from archive, search, category, and tag lists, again just to prevent exposing that the post even exists, because that could be annoying to visitors that don’t have the password! We’re going to achieve this by filtering our queries on those types of pages.</p>

<h3 id="functionsphp">functions.php</h3>

<p>This is a pretty simple filter, we’re just using the <code>&lt;a href="http://codex.wordpress.org/Class_Reference/wpdb"&gt;wpdb&lt;/a&gt;</code> class to append one more rule to the database query, and that rule is that the post password must be null. Kind of an odd way to do it, but this is the only way to check if a post is protected or not (in a query).</p>

<h3 id="notes">Notes</h3>

<p>That’s all there is to making your protected posts a little more private. Now I know what you’re thinking, obfuscation isn’t security. I know that. This isn’t to make things more secure, this is to increase the privacy of the post by limiting what information is shown and removing it from general access. I know what else you’re thinking: If your website is open to search engines your post is still going to get crawled and indexed for people to find. Yes and no; yes it will get crawled but here’s what it will index: Title: “Password Required” Content: “You need a password to view this post”. Versus the default of: Title: “Protected: Your Secret Post Title” Content: “You need a password to view this post”. So even if it gets indexed it’s not going to show up in search results, and again this isn’t about security!</p>

<p>Finally, since we’re serving our own title for the protected post you can remove the WP prep-end from the title with another custom function:</p>
            
			<div id="disqus_thread"></div>
				<script type="text/javascript">
					var disqus_shortname = 'iyware';
					(function() {
						var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
						dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
						(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
					})();
				</script>
				<noscript><p style="text-align:center;"><small>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></small></p></noscript>
            
        </div>

        <footer class="post-footer" role="contentinfo">

            <div class="vcard">
                <a href="../rss/index.rss" id="btn_feed" class="btn" title="Feed">
                    <span aria-hidden="true" data-icon=")"></span>
                    <strong>Feed</strong>
                </a>

                <a href="../" class="photo">
                    <span style="background-image: url('../content/images/2015/01/me.jpg');">
                        <img src="../content/images/2015/01/me.jpg" alt="Danny Wahl">
                    </span>
                </a>

                <div class="details">
                    <h4><a href="../" class="url n">Danny Wahl</a></h4>
                    <span>danny @ iyware.com</span><br>
                    <span>License: <a href="http://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></span><br>
                    
              
                </div>
            </div>

            <div id="user_bio">
                <div class="inner">
                    My name is Danny Wahl and I provide Ed Tech consulting to international schools in the APAC region. I dabble in writing, programming, design, and ukulele playing.
                </div>
            </div>

        </footer>

    </article>





		<script type="text/javascript" src="../assets/js/prism.min.js?v=d02990e32b"></script>
	<aside style="display:none;">
		<a href="../sitemap.xml">sitemap.xml</a>
		<a href="../sitemap-pages.xml">sitemap.xml</a>
		<a href="../sitemap-posts.xml">sitemap.xml</a>
		<a href="../sitemap-authors.xml">sitemap.xml</a>
		<a href="../sitemap-tags.xml">sitemap.xml</a>
	</aside>
</body>
</html>
